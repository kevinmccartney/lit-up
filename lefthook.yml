# Lefthook git hooks configuration
# See https://github.com/evilmartians/lefthook for documentation

pre-commit:
  commands:
    infra_terraform:
      glob: 'projects/infra/**/*.tf'
      run: scripts/git-hooks/infra_terraform_checks.sh
    format_prettier:
      glob: '**/*.{js,jsx,ts,tsx,json,yml,yaml,md,mdx,css,scss,html}'
      run: scripts/git-hooks/prettier_format.sh {staged_files}
    eslint_ui:
      glob: 'projects/ui/**/*.{js,jsx,ts,tsx}'
      run: scripts/git-hooks/eslint_ui_check.sh
    lint_api:
      glob: 'projects/api/**/*.{py}'
      run: cd projects/api && ruff check . --fix
    isort_api:
      glob: 'projects/api/**/*.py'
      run: scripts/git-hooks/isort_format.sh {staged_files}
    format_api:
      glob: 'projects/api/**/*.py'
      run: scripts/git-hooks/black_format.sh {staged_files}
prepare-commit-msg:
  commands:
    conventional_wizard:
      interactive: true
      run: scripts/git-hooks/conventional_wizard.sh "{1}" "{2}" "{3}"

commit-msg:
  commands:
    conventional_validate:
      run: scripts/git-hooks/conventional_validate.sh "{1}"
